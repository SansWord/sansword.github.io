(function(){function l(){return o[Math.floor(Math.random()*(u-1))]}function c(e){var t=e.title,n=e.content,r=e.url,i='<a href="'+r+'" target="_blank" style="color:brown;display:block;position: absolute;left: 0;bottom: 10px;width: 100%;">了解更多柯文哲的政見</a>';t=t.replace(/【柯p新政】/g,"");n=n.replace(/柯文哲/g,"我").replace(/台北市長參選人/g,"").replace(/我表示/g,"我認為").replace(/我指出/g,"我認為");n=n.split("</p>");if(n[1]==undefined)a='<p id="kp_say_bighi">您好，我是柯文哲<br>我提出<br>「'+t.substring(2)+"」</p>"+i;else a='<p id="kp_say_hi">您好，我是柯文哲</p>'+n[1]+"..."+i+"</p>";$("#kp_says").html(a).promise().done(function(){$("p").removeAttr("style");$("span").removeAttr("style")})}var e="http://unlimited.kptaipei.tw/images/kp.png",t="http://api.kptaipei.tw/v1/category/40?accessToken=kp53f568e77303e9.28212837",n=450,r=466,i=-130,s="你好，我是柯文哲",o={},u,a,f='<div id="kp_come_container" style="width:'+r+"; height:"+n+"px; position:fixed; left:-"+r+'px; bottom:0;"><img src="'+e+'" style="width:'+r+"; height:"+n+'px;"><div id="kp_popup" style="padding: 20px; width: 300px; height:140px; position: absolute;left:'+r*.8+"px;top:"+n*.28+'px;-webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px;-webkit-box-shadow: rgba(0,0,0,.4) 0px 1px 5px -1px;box-shadow: rgba(0,0,0,.4) 0px 1px 5px -1px; background-color:beige;display:none;"><div id="kp_says" style="text-align:center;font-size:18px;line-height:26px;">'+s+'</div><div style="width: 0px;height: 0px;border-top-width: 15px;border-top-style: solid;border-top-color: transparent;border-bottom-width: 15px;border-bottom-style: solid;border-bottom-color: transparent;border-right-width: 40px;border-right-style: solid;border-right-color: rgba(0,0,0,.4);position: absolute;left: -40px;top:30%;"></div><div style="width: 0px;height: 0px;border-top-width: 15px;border-top-style: solid;border-top-color: transparent;border-bottom-width: 15px;border-bottom-style: solid;border-bottom-color: transparent;border-right-width: 42px;border-right-style: solid;border-right-color: beige;position: absolute;left: -40px;top:29.8%;"></div><div id="kx_close_popup">X</div></div></div><style>html,body{height:100%;}#kp_come_container #kp_popup{-webkit-box-sizing: initial;-moz-box-sizing: initial;box-sizing: initial;}#kp_come_container #kp_says {height:115px;overflow-y:auto;text-algin:center;-webkit-box-sizing: initial;-moz-box-sizing: initial;box-sizing: initial;}#kp_come_container #kp_says p,#kp_come_container #kp_says span {padding:0;margin:0;font-size:18px;line-height:26px;}#kp_come_container #kp_say_hi{padding:0;margin:0;font-size:18px;line-height:26px;padding-bottom:5px;display:block;}#kp_come_container #kp_says #kp_say_bighi{font-size:22px;font-weight:bold;line-height:32px;}#kp_come_container #kx_close_popup{position:absolute;right:10px;top:8px;cursor:pointer;color:#aaa;}</style>';$("body").append(f);$.get(t,function(e){var t=0;$.each(e.data,function(e,n){o[t]=n;t++});u=t;var n=l();c(n)});$(window).scroll(function(){var e=$(window).scrollTop();var t=$(window).height();var n=$(document).height();if(e+t>n*.8){if($("#kp_come_container").css("left")=="-"+r+"px"){$("#kp_come_container").animate({left:i+"px"},100,function(){$("#kp_popup").show()})}}else{if($("#kp_come_container").css("left")==i+"px"){$("#kp_popup").hide();$("#kp_come_container").animate({left:"-"+r+"px"},100,function(){c(l())})}}});$("#kp_come_container img").click(function(){$("#kp_popup").hide();$("#kp_come_container").animate({left:"-"+(r+10)+"px"},100,function(){})});$("#kx_close_popup").click(function(){$("#kp_popup").hide()})})()
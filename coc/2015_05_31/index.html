<html>
<head>
    <meta charset="utf-8" /> 
    <link rel="stylesheet" type="text/css" href="css/c3.css">
    <style>
        #chart {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div id="chart"></div>

<script src="js/d3.min.js" charset="utf-8"></script>
<script src="js/c3.js"></script>
<script>
    var chart = c3.generate({
        data: {
            // hide: ['data1', 'data2'],
            xs: {
                'data1': 'x',
                'data2': 'x',
                'data3': 'x',
            },
            types: {
                data1: 'line',
                data2: 'line',
                data3: 'area'
            },
            columns: [
                ['x', 2,4,6,7,9,10,11,11,16,19,20,36,39,39,59,63,67,68,89,101,102,102,103,112,112,120,122,122,127,129,140,140,155,156,157,160,166,168,171,190,193,203,215,228,229,250,251,313,332,343,359,462,502,507,534,551,558,567,573,578,580,584,614,635,641,651,663,684,689,689,697,698,708,712,716,718,746,752,758,767,768,776,783,814,836,855,861,875,883,918,920,921,930,940,946,976,979,988,991,993,1005,1034,1078,1086,1106,1131,1139,1147,1148,1177,1197,1212,1227,1234,1237,1297,1303,1304,1369,1384,1389,1393,1396,1409,1410,1427,1440,1441],
                ['data1', 3,4,5,5,5,6,9,10,10,13,15,15,15,16,18,21,24,24,27,30,32,33,33,33,36,37,39,41,44,47,47,50,51,52,52,55,56,56,56,56,56,56,59,60,62,62,63,66,66,66,67,67,67,67,69,69,69,71,71,71,73,76,76,76,76,76,78,78,78,78,78,80,80,80,80,80,80,80,80,81,81,81,83,83,83,83,83,84,86,87,87,87,87,89,92,94,94,95,95,95,95,95,95,95,98,99,100,100,101,104,105,105,108,108,109,111,112,112,113,115,116,116,119,121,122,124,126,126],
                ['data2', 0,0,0,3,5,5,5,5,7,7,7,10,13,13,13,13,13,16,16,16,16,16,19,21,21,21,21,21,21,21,23,23,23,23,25,25,25,28,29,32,35,36,36,36,36,37,37,37,40,42,42,44,46,49,49,51,53,53,54,56,56,56,59,61,64,67,67,70,73,75,77,77,78,79,81,83,86,88,90,90,92,94,94,97,98,99,100,100,100,100,102,103,106,106,106,106,108,108,109,111,113,115,117,119,119,119,119,120,120,120,120,121,121,122,122,122,122,123,123,123,123,124,124,124,124,124,124,125],

                ['data3', 3,4,5,2,0,1,4,5,3,6,8,5,2,3,5,8,11,8,11,14,16,17,14,12,15,16,18,20,23,26,24,27,28,29,27,30,31,28,27,24,21,20,23,24,26,25,26,29,26,24,25,23,21,18,20,18,16,18,17,15,17,20,17,15,12,9,11,8,5,3,1,3,2,1,-1,-3,-6,-8,-10,-9,-11,-13,-11,-14,-15,-16,-17,-16,-14,-13,-15,-16,-19,-17,-14,-12,-14,-13,-14,-16,-18,-20,-22,-24,-21,-20,-19,-20,-19,-16,-15,-16,-13,-14,-13,-11,-10,-11,-10,-8,-7,-8,-5,-3,-2,0,2,1]

            ],
            names: {
                data1: 'HDTV TW4',
                data2: '敵軍',
                data3: '兩軍差距'
            },
            selection: {
                enabled: true,
                grouped: true,
                multiple: false
            },
//           labels: {
// //            format: function (v, id) { return "Default Format on " + id; },
//             format: {
//               data1: function (v, id) { return "data1 Format"; },
//               data2: function (v, id) { return "data2 Format"; }
//             }
//           },
            onclick: function (d, element) {
                console.log("onclick", d, element);
            },
            onmouseover: function (d) {
                console.log("onmouseover", d);
            },
            onmouseout: function (d) {
                console.log("onmouseout", d);
            }
        },
        axis : {
            x : {
                tick: {
                    format: function (x) {
                      x = x + 21*60 + 23;
                      var month = 6,
                          day = 1,
                          hour = Math.floor(x / 60),
                          min = x % 60;
                      day += Math.floor(hour / 24);
                      hour = hour % 24;
                      if(hour < 10) {
                        if(hour == 0) {
                            hour = "00";
                        } else {
                            hour = "0" + hour;
                        }
                      }
                      if(min < 10) {
                        if(min == 0) {
                            min = "00";
                        } else {
                            min = "0" + min;
                        }
                      }
                      return "6/"+day+" - "+hour + ":" + min;
                    }
                },
                label: "距開場時間"
            },
            y : {
                label: "合計星數"
            }
        },
        grid: {
            x: {
                lines: [
                    {value: 166, text: '我方領先最多: 31顆星, 2015/6/2 00:09'},
                    {value: 1086, text: '我方落後最多: 24顆星, 2015/6/2 18:06'}
                ]
            },
            y: {
                lines: [
                    {value: 0, text: '地平線'},
                    {value: -24, text: '我方落後最多: 24顆星, 2015/6/2 18:06'},
                    {value: 31, text: '我方領先最多: 31顆星, 2015/6/2 00:09'}
                ]
            }
        },
        bar: {
            ratio: 0.8
        },
        zoom: {
            enabled: true
        },
        subchart: {
            show: true
        },
        tooltip: {
            format: {
                title: function (x) {
                      x = x + 21*60 + 23;
                      var month = 6,
                          day = 1,
                          hour = Math.floor(x / 60),
                          min = x % 60;
                      day += Math.floor(hour / 24);
                      hour = hour % 24;
                      if(hour < 10) {
                        if(hour == 0) {
                            hour = "00";
                        } else {
                            hour = "0" + hour;
                        }
                      }
                      if(min < 10) {
                        if(min == 0) {
                            min = "00";
                        } else {
                            min = "0" + min;
                        }
                      }
                      return "2015/6/"+day+" - "+hour + ":" + min;
                    }
            }
        }
    });
</script>
</body>
</html>

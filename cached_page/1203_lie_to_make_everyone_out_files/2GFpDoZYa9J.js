if (self.CavalryLogger) { CavalryLogger.start_js(["nBrjc"]); }

__d('MAria',['createArrayFromMixed'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(t){if(t.length>1)return Array.from(t);return h(t[0]);}function j(t){if(!t)return null;return t.getAttribute('aria-hidden')==='true';}function k(t){if(!t)return;t=i(arguments);for(var u=0,v=t.length;u<v;u++)t[u].setAttribute('aria-hidden','false');}function l(t){if(!t)return;t=i(arguments);for(var u=0,v=t.length;u<v;u++)t[u].setAttribute('aria-hidden','true');}function m(t){if(!t)return;t=i(arguments);for(var u=0,v=t.length;u<v;u++)if(j(t[u])){k(t[u]);}else l(t[u]);}function n(t,u){if(!t)return;if(u===null){t.removeAttribute('aria-label');}else t.setAttribute('aria-label',u);}function o(t){if(!t)return null;var u=t.getAttribute('aria-label');return u!==null&&u!=='';}function p(t,u){t.setAttribute('aria-haspopup','true');t.setAttribute('aria-controls',u.getAttribute('id'));r(t,u);}function q(t,u){t.setAttribute('aria-pressed','true');if(u){u.setAttribute('aria-hidden','false');u.setAttribute('aria-expanded','true');}}function r(t,u){t.setAttribute('aria-pressed','false');if(u){u.setAttribute('aria-hidden','true');u.setAttribute('aria-expanded','false');}}var s={show:k,hide:l,isHidden:j,toggleVisibility:m,setLabel:n,hasLabel:o,setupPopup:p,showPopup:q,hidePopup:r};f.exports=s;}),null);
__d('MPageError',['$','DOM','LoadingIndicator','MErrorCodes','JSLog','MPageController','Stratcom'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=h('mErrorView'),p=i.find(o,'div','error-message');n.listen('click','MPageError:retry',m.reload);n.listen('m:page:loading',null,function(q){i.hide(o);});n.listen('m:page:error',null,function(q){var r=q.getData(),s=k.getMessage(r);j.hide();i.setContent(p,s);i.show(o);l.warn('Error code: %s',r);});}),null);
__d('MTabbable',['MAria','MJSEnvironment','MViewport','isNodeWithinRect'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(o,p){while(o&&o!==p){if(h.isHidden(o))return true;o=o.parentNode;}return false;}function m(o,p){if(o.offsetHeight===0||o.offsetWidth===0||window.getComputedStyle(o).visibility==='hidden'||parseInt(o.tabIndex,10)<0||l(o,p))return false;if(o.tabIndex>=0)return true;switch(o.tagName){case 'A':return o.href&&o.rel!='ignore';case 'INPUT':return o.type!='hidden'&&o.type!='file'&&!o.disabled;case 'BUTTON':case 'SELECT':case 'TEXTAREA':return !o.disabled;}return false;}function n(o){if(!o.getBoundingClientRect)return;var p=i.IS_APPLE_WEBKIT_IOS&&parseFloat(i.OS_VERSION)>=8||i.BROWSER_NAME==='Safari'&&!i.IS_APPLE_WEBKIT_IOS,q=p?o.querySelectorAll('a, button, select, [tabindex]'):o.querySelectorAll('a, button, input, select, textarea, [tabindex]'),r=j.getBoundingRect();for(var s=0,t;t=q[s];s++)if(m(t,o)&&k(t,r)){t.focus();return;}}g.focusTabbable=n;}),null);
__d('Popover',['setTimeoutAcrossTransitions','CSS','DOM','MAria','MViewport','Stratcom','Vector','$','eventsMixinDeprecated'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=40;function r(s){'use strict';var t=s.flyout;this.flyout=typeof t=='string'?o(t):t;this.content=j.scry(this.flyout,'div','flyout-content')[0];this.options=s;this._onOrientationChange=this._reposition.bind(this);i.conditionClass(this.flyout,'popover_flyout',true);var u=s.button;if(u){this.button=typeof u=='string'?o(u):u;this.buttonClickListener=j.listen(this.button,'click',null,this._openHandler.bind(this));this.button.setAttribute('role','button');k.setupPopup(this.button,this.flyout);}var v=s.flyoutAnchor;if(v){this.flyoutAnchor=typeof v=='string'?o(v):v;}else this.flyoutAnchor=this.button;if(this.options.flyoutFromRoot)this.flyoutClickListener=j.listen(this.flyout,'click',null,this._openHandler.bind(this));if(this.options.touchstart_callback)this.flyoutTouchStartListener=j.listen(this.flyout,'touchstart',null,this._touchStartHandler.bind(this));if(this.options.touchmove_callback)this.flyoutTouchMoveListener=j.listen(this.flyout,'touchmove',null,this._touchMoveHandler.bind(this));if(this.options.touchend_callback)this.flyoutTouchEndListener=j.listen(this.flyout,'touchend',null,this._touchEndHandler.bind(this));r._instances[this.flyout.id]=this;}r.prototype.isOpen=function(){'use strict';return !!this._isOpen;};r.prototype.open=function(){'use strict';if(this.isOpen())return;if(r._activePopover)r._activePopover.close();r._activePopover=this;this._isOpen=true;this.constraint=null;i.conditionClass(this.flyout,'popover_hidden',false);if(this.options.flyoutFromRoot)this._absolutePositionFlyout();this._position();if(!this.options.heightConstraint){i.conditionClass(document.body,'disableClicks',true);this.globalListener=m.listenCapture('click',null,this._closeHandler.bind(this));}window.addEventListener('orientationchange',this._onOrientationChange,false);k.showPopup(this.button,this.flyout);if(this.options.ensureVisible){var s=l.getScrollTop(),t=this._getElementPosition(this.flyout).y,u=t+this.flyout.offsetHeight,v=u-(s+l.getUseableHeight());if(v>0){var w=Math.min(v,Math.max(t-s-q,0));l.scrollTo(0,s+w);}}this.invoke('open');};r.prototype.close=function(s){'use strict';if(!this.isOpen())return;r._activePopover=null;this._isOpen=false;i.conditionClass(this.flyout,'popover_hidden',true);if(this.options.flyoutFromRoot){this.flyoutParent.appendChild(this.flyout);delete this.flyoutParent;}h(function(){i.conditionClass(document.body,'disableClicks',false);}.bind(this),400);this.globalListener&&this.globalListener.remove();window.removeEventListener('orientationchange',this._onOrientationChange,false);this._releaseConstraint();k.hidePopup(this.button,this.flyout);if(!s)this.invoke('close');};r.prototype.clear=function(){'use strict';this.globalListener&&this.globalListener.remove();this.buttonClickListener&&this.buttonClickListener.remove();this.flyoutClickListener&&this.flyoutClickListener.remove();this.flyoutTouchStartListener&&this.flyoutTouchStartListener.remove();this.flyoutTouchMoveListener&&this.flyoutTouchMoveListener.remove();this.flyoutTouchEndListener&&this.flyoutTouchEndListener.remove();delete r._instances[this.flyout.id];};r.prototype.refreshConstraints=function(){'use strict';if(!this._isOpen)return false;var s=this.flyout;this._releaseConstraint();if(this.options.heightConstraint){s.style.minHeight=l.getUseableHeight()+'px';this.constraint=l.addHeightConstraint(n.getDim(this.content).y+this._getElementPosition(s).y);}else this.constraint=l.addMinHeightConstraint(n.getDim(s).y+this._getElementPosition(s).y+r._MARGIN);};r.prototype._getTouchPoint=function(event){'use strict';var s=event.getRawEvent().targetTouches[0],t={x:s?s.screenX:0,y:s?s.screenY:0};return t;};r.prototype._touchStartHandler=function(event){'use strict';this.options.touchstart_callback(this._getTouchPoint(event));};r.prototype._touchMoveHandler=function(event){'use strict';if(this.isOpen())this.options.touchmove_callback(this._getTouchPoint(event));};r.prototype._touchEndHandler=function(event){'use strict';this.options.touchend_callback(this._getTouchPoint(event));};r.prototype._openHandler=function(event){'use strict';event.prevent();var s=this.isOpen();if(s&&!this.options.preventClose){this.close();}else if(!s){var t=j.scry(document,'input');for(var u=0;u<t.length;u++)t[u].blur();this.open();}};r.prototype._closeHandler=function(event){'use strict';if(!event.getNode('popover'))this.close();};r.prototype._getElementPosition=function(s){'use strict';var t=s.offsetLeft,u=s.offsetTop;s=s.offsetParent;while(s&&s!==document.documentElement){t+=s.offsetLeft;u+=s.offsetTop;var v=window.getComputedStyle(s);t+=parseInt(v.getPropertyValue('border-left-width').slice(0,-2),10);u+=parseInt(v.getPropertyValue('border-top-width').slice(0,-2),10);s=s.offsetParent;}return new n(t,u);};r.prototype._absolutePositionFlyout=function(){'use strict';this.flyoutParent=this.flyout.parentNode;o('root').appendChild(this.flyout);var s=this._getElementPosition(this.flyout.parentNode),t=this._getElementPosition(this.flyoutAnchor),u=n.getDim(this.flyoutAnchor),v=t.y-s.y+u.y;this.flyout.style.position='absolute';this.flyout.style.top=v+'px';};r.prototype._position=function(){'use strict';var s=this.flyout;if(this.flyoutAnchor&&this.options.positionNub){var t=this._getElementPosition(this.flyoutAnchor),u=j.find(this.flyout,'*','nub'),v=n.getDim(u).x,w=n.getDim(this.flyoutAnchor).x,x=this._getElementPosition(s);new n(t.x-x.x+(w-v)/2,0).setPos(u);}this.refreshConstraints();};r.prototype._reposition=function(){'use strict';h(this._position.bind(this),0);};r.prototype._releaseConstraint=function(){'use strict';if(this.constraint){this.constraint.release();this.constraint=null;}};r.getInstance=function(s){'use strict';return r._instances[s];};r.clearAll=function(){'use strict';for(var s=0;s<r._instances.length;s++)r._instances[s].clear();};p(r,['open','close']);Object.assign(r,{_activePopover:null,_MARGIN:40,_instances:{}});f.exports=r;}),null);
__d('MJewel',['setTimeoutAcrossTransitions','CSS','DOM','MHistory','MJSEnvironment','MLogState','MTabbable','MViewport','Popover','Stratcom','$','eventsMixinDeprecated'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=10;function u(v,w){'use strict';this._sigil=v;this.options=w||{};this._jewelNode=r(u.JEWEL_NAV_NODE_ID);this._softState=w.softState||'jewel='+u.nextID++;this._duringInit=false;this._createPopover();q.listen('m:history:change',null,function(event){if(event.getData().soft===this._softState){this._popover&&this._popover.open();}else this._popover&&this._popover.close();}.bind(this));}u.prototype.isInitialized=function(){'use strict';var v=this.options.contentsSigil||'contents';return !!j.scry(this._jewelNode,'*',v)[0];};u.prototype._getJewelElement=function(){'use strict';return j.find(this._jewelNode,'div',this._sigil);};u.prototype._getCountElement=function(){'use strict';return j.find(this._getJewelElement(),'span','count');};u.prototype._getContentsElement=function(){'use strict';var v=this.options.contentsSigil||'contents';return j.find(this._getJewelElement(),'*',v);};u.prototype._getFlyoutElement=function(){'use strict';return j.find(this._getJewelElement(),'*','flyout');};u.prototype.getCount=function(){'use strict';return this._count;};u.prototype.setDuringInit=function(v){'use strict';this._duringInit=v;};u.prototype._updateCountElement=function(){'use strict';var v=this._getJewelCount();j.setContent(this._getCountElement(),''+v);var w=this._getJewelElement(),x=this._count>0;i.conditionClass(w,'noCount',!x);i.conditionClass(w,'hasCount',x);};u.prototype.setCount=function(v){'use strict';if(v<0)return;this._count=v;this._updateCountElement();};u.prototype.setHeaderText=function(v,w){'use strict';if(!v||!w)return;var x=this._getFlyoutElement();if(!x)return;var y=j.scry(x,'*',v)[0];if(!y)return;var z=y.cloneNode(true);z.innerText=w;j.replace(y,z);};u.prototype.handleViewedContent=function(){'use strict';if(this.getCount()>0&&this.isInitialized()){this.setCount(0);this.invoke('cleared');}else this.invoke('jewel_click');};u.prototype.setMenuContent=function(v){'use strict';j.setContent(this._getFlyoutElement(),v);if(this.isOpen())this.handleViewedContent();};u.prototype.prependMenuContent=function(v){'use strict';j.prependContent(this._getContentsElement(),v);};u.prototype.removeMenuContent=function(v){'use strict';var w=document.getElementById(v);if(w)j.remove(w);};u.prototype.updateMenuColor=function(v,w,x){'use strict';x?h(this._updateMenuColor.bind(this,v,w),u.MARK_READ_DELAY):this._updateMenuColor(v,w);};u.prototype._updateMenuColor=function(v,w){'use strict';var x=document.getElementById(v);if(x){i.conditionClass(x,u.M_AREA_LIGHTBLUE,!w);i.conditionClass(x,u.M_AREA_WHITE,w);}};u.prototype._createPopover=function(){'use strict';var v=this._getJewelElement(),w=j.find(v,'div','flyout');this._popover=new p({button:j.find(v,'*','icon'),flyout:w,ensureVisible:false,heightConstraint:true,preventClose:true});this._onOpenListener=this._popover.listen('open',this._onOpen.bind(this));this._onCloseListener=this._popover.listen('close',this._onClose.bind(this));this._popoverClickListener=j.listen(w,'click',null,this._onPopoverClick.bind(this));if(l.IS_ANDROID&&l.GET_OS_VERSION>=4)this._scrollAreaNode=j.scry(w,'div','scroll-area')[0];};u.prototype.clear=function(){'use strict';this._onOpenListener&&this._onOpenListener.remove();this._onCloseListener&&this._onCloseListener.remove();this._popoverClickListener&&this._popoverClickListener.remove();this._popoverTouchStartListener&&this._popoverTouchStartListener.remove();this._touchMoveListener&&this._touchMoveListener.remove();this._touchStartListener&&this._touchStartListener.remove();this._popover&&this._popover.clear();};u.prototype._onPopoverClick=function(event){'use strict';m.updateLink(event,this.options.pos);this.options.clickCallback&&this.options.clickCallback(event);};u.prototype._onPopoverTouchStart=function(event){'use strict';event.kill();};u.prototype._getJewelCount=function(){'use strict';if(this._count>0){return this._count;}else return this._unreadCount;};u.prototype._onOpen=function(){'use strict';if(this._scrollAreaNode){o.scrollToHeader();var v=document.documentElement;i.conditionClass(v,'hide-scroll',true);this._scrollAreaNode.style.maxHeight=v.offsetHeight-200+'px';}var w=this._getJewelCount();k.pushSoftState(this._softState);this.handleViewedContent();q.invoke('m:jewel:flyout:open',null,{jewel:this._sigil});i.conditionClass(this._getJewelElement(),'popoverOpen',true);var x=j.find(this._getJewelElement(),'div','flyout');n.focusTabbable(x);};u.prototype._onClose=function(){'use strict';if(this._scrollAreaNode){this._scrollAreaNode.style.minHeight='';i.conditionClass(document.documentElement,'hide-scroll',false);}q.invoke('m:jewel:flyout:close',null,{jewel:this._sigil});i.conditionClass(this._getJewelElement(),'popoverOpen',false);k.popSoftState(this._softState);};u.prototype.isOpen=function(){'use strict';return this._popover&&this._popover.isOpen();};u.prototype.openPopover=function(){'use strict';this._popover&&!this._popover.isOpen()&&this._popover.open();};u.prototype.reregisterListeners=function(){'use strict';var v=this.isOpen();this.clear();this._createPopover();if(v)this._popover.open();};s(u,['cleared','jewel_click']);Object.assign(u,{M_AREA_WHITE:'acw',M_AREA_LIGHTBLUE:'aclb',MARK_READ_DELAY:3000,JEWEL_NAV_NODE_ID:'mJewelNav',nextID:0});Object.assign(u.prototype,{_sigil:null,_currentJewel:null,_count:0,_popover:null});f.exports=u;}),null);
__d('MJewels',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={REQUESTS:'requests',MESSAGES:'messages',NOTIFICATIONS:'notifications',SEARCH:'search',MORE:'more',NEWS_FEED:'news-feed',BOOKMARKS:'bookmarks',VIDEOS:'videos'};}),null);
__d("XMessagesJewelContentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mobile\/messages\/jewel\/content\/",{spinner_id:{type:"String",required:true}});}),null);
__d("XNotificationJewelContentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mobile\/notifications\/jewel\/content\/",{spinner_id:{type:"String",required:true}});}),null);
__d('MJewelSet',['ChannelEventType','MLegacyDataStore','DOM','EventListener','MarauderLogger','MessagingEvent','MJewels','MJewel','MLogState','Popover','MRequest','MViewport','Stratcom','MTouchChannelManager','MURI','XNotificationJewelContentController','XMessagesJewelContentController','BanzaiLogger','Banzai','ScriptPath','MtouchNavigationLogging','MPymkFunnelLogger','fbt','throttle'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){if(c.__markCompiled)c.__markCompiled();var fa={_viewerID:null,_requestsJewel:null,_messagesJewel:null,_notificationsJewel:null,_unseenNotificationIds:{},_jewelClickLogListener:null,_messengerCliff:false,_messengerCliffQELogged:false,_messengerCliffShouldLog:false,_messengerCliffCp:null,_messengerCliffData:null,_haveInitializedJewels:false,_pymkAndRequestImpressionLogged:false,MSG_ID_PREFIX:'msg_',OTHER_USER_FBID_PREFIX:'other_user_fbid_',THREAD_FBID_PREFIX:'thread_fbid_',NOTIF_ID_PREFIX:'notif_',JEWEL_NAV_NODE_ID:'mJewelNav',JEWEL_NAV_CACHE_KEY:'mJewelNavKey',JEWEL_MSG_LIST:'mJewelMsgThreadContents',_lazyLoadNotificationsReq:null,_lazyLoadMessagesReq:null,_hasCombinedTab:false,_diodeBadgeableQPCount:0,createJewels:function ga(ha){if(ha.showRequests){fa._requestsJewel=new o('requests',{pos:p.CLICK_POSITION_REQUESTS_FLYOUT,softState:n.REQUESTS},'friends_jewel_module');fa._requestsJewel.listen('cleared',fa._markRequestsRead);fa._requestsJewel.listen('jewel_click',fa._logRequestsJewelClick);}if(ha.hasCombinedTab)fa._hasCombinedTab=true;fa._messagesJewel=new o('messages',{contentsSigil:fa.JEWEL_MSG_LIST,pos:p.CLICK_POSITION_MESSAGES_FLYOUT,softState:n.MESSAGES},'messages_jewel_module');fa._messagesJewel.listen('cleared',fa._markMessagesRead);fa._notificationsJewel=new o('notifications',{pos:p.CLICK_POSITION_NOTIFICATIONS_FLYOUT,softState:n.NOTIFICATIONS},'notifications_jewel_module');fa._notificationsJewel.listen('cleared',fa._markNotificationsSeen);fa._jewelClickLogListener=fa._notificationsJewel.listen('jewel_click',fa._logNotificationJewelClick);t.listen('m:jewel:flyout:open',null,fa._onJewelOpen);},openMessageJewel:function ga(){fa._messagesJewel.openPopover();},setMessengerCliff:function ga(ha,ia,ja){fa._messengerCliff=ha;fa._messengerCliffCp=ja;fa._messengerCliffData=ia;},setMessengerCliffShouldLog:function ga(ha,ia){fa._messengerCliffShouldLog=ha;fa._messengerCliffData=ia;},markFriendRequestsSeen:function ga(event){if(fa._requestsJewel===null)return;fa._requestsJewel.setCount(0);},updateFriendRequests:function ga(event){if(fa._requestsJewel===null)return;if(fa._requestsJewel.isOpen())return;var ha=new r('/ajax/mobile/friends/jewel/requests_markup');ha.send();},onAfterUpdateFriendRequests:function ga(ha){if(fa._requestsJewel===null)return;fa._setJewelCount(fa._requestsJewel,ha,fa._markRequestsRead);q.getInstance('reqs_flyout').refreshConstraints();if(fa._requestsJewel.isOpen()){var ia=fa._requestsJewel._getContentsElement();fa._logPymkAndRequestImpression(ia);}},onCombinedTabAsyncLoad:function ga(){if(fa._notificationsJewel&&fa._notificationsJewel.isOpen()){var ha=fa._notificationsJewel._getContentsElement();fa._logPymkAndRequestImpression(ha);}},_logPymkAndRequestImpression:function ga(ha){if(fa._pymkAndRequestImpressionLogged)return;fa._pymkAndRequestImpressionLogged=true;var ia=j.scry(ha,'div','undoable-action');for(var ja=0;ja<ia.length;ja++){var ka=ia[ja].getAttribute('data-pymk-id');if(ka){var la=ia[ja].getAttribute('data-signature');ca.logImpression(ka,la,'mobile_jewel');}else{var ma=i.get(ia[ja]).userid;l.log('request_seen','friend_request_waterfall',{request_id:ma,request_location:'requests_jewel'});}}},refreshNotificationsConstraints:function ga(){q.getInstance('notifications_flyout').refreshConstraints();},refreshNotificationsConstraintsOnImageLoad:function ga(){var ha=document.getElementById('notifications_flyout');if(!ha)return;fa.refreshNotificationsConstraints();var ia=ea(fa.refreshNotificationsConstraints,500);j.scry(ha,'img','notif_thumb').forEach(function(ja){var ka=k.listen(ja,'load',function(){ka.remove();ia();});});},refreshMessagesConstraints:function ga(){q.getInstance('messages_flyout').refreshConstraints();},updateNotification:function ga(event){var ha=event.getData();if(ha&&ha.data){if(ha.data.type==='friend_confirmed')return;if(!fa._notificationsJewel.isOpen()&&!fa._unseenNotificationIds[ha.data.alert_id])fa._notificationsJewel.setCount(ha.data.unread+fa._notificationsJewel.getCount());fa._notificationsJewel.removeMenuContent(fa._getNotifNodeID(ha.data.alert_id));fa._unseenNotificationIds[ha.data.alert_id]=true;if(fa._notificationsJewel.isOpen())fa._markNotificationsSeen();fa._loadNotificationJewelContent();}},updateUnseenNotificationIds:function ga(event){var ha=event.getData();if(!ha)return;var ia=event.getType()=='notifications_read';if(ha.alert_ids){var ja=0;for(var ka=0;ka<ha.alert_ids.length;ka++)if(fa._unseenNotificationIds[ha.alert_ids[ka]]){delete fa._unseenNotificationIds[ha.alert_ids[ka]];ia&&fa._notificationsJewel.updateMenuColor(fa._getNotifNodeID(ha.alert_ids[ka]),true,false);ja++;}var la=fa._notificationsJewel.getCount();fa._notificationsJewel.setCount(la-ja);}else{fa._notificationsJewel.setCount(0);if(ia)for(var ma in fa._unseenNotificationIds)fa._notificationsJewel.updateMenuColor(fa._getNotifNodeID(ma),true,false);fa._unseenNotificationIds={};}},updateUnreadMessageCount:function ga(event){var ha=event.getData();if(!ha)return;if(ha.unseen!==null&&!fa._messagesJewel.isOpen())fa._messagesJewel.setCount(ha.unseen+fa._diodeBadgeableQPCount);if(ha.unread!==null){var ia=null;if(ha.unread>0){ia=da._("\u8a0a\u606f\uff08{unread_message_count}\uff09",[da.param('unread_message_count',ha.unread)]);}else ia=da._("\u8a0a\u606f");fa._messagesJewel.setHeaderText('messages_jewel_header_text',ia);}},updateMessage:function ga(event){var ha=event.getData();if(!ha)return;if(ha.parsedPayload){var ia=ha.parsedPayload;if(ia.getFolder()!=='inbox'||!fa._viewerIsAParticipant(fa._viewerID,ia))return;if(fa._messagesJewel.isInitialized()){fa._messagesJewel.removeMenuContent(fa._getMessageNodeID(ia.getOtherUserFBID(),ia.getThreadFBID()));if(fa._messagesJewel.isOpen())fa._markMessagesRead();}fa._loadMessagesJewelContent();}else if(ha.mark_as_read){for(var ja=0;ja<ha.other_user_fbids.length;ja++){var ka=ha.other_user_fbids[ja];if(ha.folder_info[ka]!=='inbox')continue;fa._messagesJewel.updateMenuColor(fa._getMessageNodeID(ka.toString(),null),ha.event=='read',false);}for(ja=0;ja<ha.thread_fbids.length;ja++){var la=ha.thread_fbids[ja];if(ha.folder_info[la]!=='inbox')continue;fa._messagesJewel.updateMenuColor(fa._getMessageNodeID(null,la.toString()),ha.event=='read',false);}}else if(ha.event===m.READ&&ha.is_sync)fa._messagesJewel.updateMenuColor(fa._getMessageNodeID(ha.message.other_user_fbid,ha.message.thread_fbid),true,false);},_getMessageNodeID:function ga(ha,ia){ha=ha?ha:'';ia=ia?ia:'';return (fa.MSG_ID_PREFIX+fa.OTHER_USER_FBID_PREFIX+ha+fa.THREAD_FBID_PREFIX+ia);},_getNotifNodeID:function ga(ha){return fa.NOTIF_ID_PREFIX+ha;},_markRequestsRead:function ga(){t.invoke('m_requests_jewel_mark_read');var ha=new r(new v('/a/jewel_requests_read.php').toString());ha.send();},_markMessagesRead:function ga(){var ha=new r(new v('/a/jewel_messages_read.php').toString());ha.send();},_markNotificationsSeen:function ga(){if(fa._jewelClickLogListener){fa._jewelClickLogListener.remove();fa._jewelClickLogListener=null;}if(fa._hasCombinedTab)fa._markRequestsRead();var ha=fa._unseenNotificationIds;fa._unseenNotificationIds={};var ia=[];for(var ja in ha)ia.push(ja);var ka=new r(new v('/a/jewel_notifications_read.php').toString());ka.addData({ids:ia,count:ia.length,seen:true});ka.send();},_onJewelOpen:function ga(event){var ha=event.getData();if(ha&&ha.jewel)if(ha.jewel==='notifications'){fa._loadNotificationJewelContent();}else if(ha.jewel==='messages'){if(fa._messengerCliff||fa._messengerCliffShouldLog){if(!fa._messengerCliffQELogged){var ia={signal:true},ja={name:fa._messengerCliffData};z.post('qe_log_exposure',ja,ia);fa._messengerCliffQELogged=true;}if(fa._messengerCliff)y.log('XFBConfirmationCliffLoggerConfig',{event:'messenger_seen',contactpoint:fa._messengerCliffCp});}var ka=fa._messagesJewel.getCount()-fa._diodeBadgeableQPCount;fa._messagesJewel.setCount(ka);fa._diodeBadgeableQPCount=0;fa._loadMessagesJewelContent();}if(ba.useNewLogging)aa.set('topbar_'+ha.jewel);},_loadNotificationJewelContent:function ga(){var ha=fa._notificationsJewel._getContentsElement(),ia='notifications-flyout-loading';if(t.hasSigil(ha,ia)){var ja=w.getURIBuilder().setString('spinner_id',ha.getAttribute('id')).getURI();if(!fa._lazyLoadNotificationsReq){fa._lazyLoadNotificationsReq=new r(ja);fa._lazyLoadNotificationsReq.listen('finally',function(){fa._lazyLoadNotificationsReq=null;});fa._lazyLoadNotificationsReq.send();}}},_loadMessagesJewelContent:function ga(){var ha=fa._messagesJewel._getJewelElement(),ia='messages-flyout-loading',ja=j.scry(ha,'*',ia);if(ja.length>0){var ka=x.getURIBuilder().setString('spinner_id',ja[0].getAttribute('id')).getURI();if(!fa._lazyLoadMessagesReq){fa._lazyLoadMessagesReq=new r(ka);fa._lazyLoadMessagesReq.listen('finally',function(){fa._lazyLoadMessagesReq=null;});fa._lazyLoadMessagesReq.send();}}},_logNotificationJewelClick:function ga(){if(fa._jewelClickLogListener){fa._jewelClickLogListener.remove();fa._jewelClickLogListener=null;}if(fa._hasCombinedTab){var ha=fa._notificationsJewel._getContentsElement();fa._logRequestsImpessions(ha);if(fa._notificationsJewel.isOpen())if(!t.hasSigil(ha,'notifications-flyout-loading'))fa._logPymkAndRequestImpression(ha);}new r('/a/jewel_notifications_log.php').addData({click_type:'jewel_click',count:fa._notificationsJewel.getCount()}).send();},_logRequestsJewelClick:function ga(){var ha=fa._requestsJewel._getContentsElement();fa._logRequestsImpessions(ha);if(fa._requestsJewel.isOpen())if(t.hasSigil(ha,'requests-flyout-loading')){new r('/ajax/mobile/friends/jewel/requests_markup').send();}else{var ia=fa._requestsJewel._getContentsElement();fa._logPymkAndRequestImpression(ia);}},_logRequestsImpessions:function ga(ha){if(!ha)return;var ia=j.scry(ha,'div','attachment'),ja=[];for(var ka=0;ka<ia.length;ka++){var la=ia[ka].getAttribute('id');if(la&&la.startsWith('m_jewel_req_'))ja=ja.concat(la.replace('m_jewel_req_',''));}if(ja.length){var ma=new r('/friends/requests/log_impressions');ma.setMethod('POST');ma.addData({ids:ja.join(','),ref:'m_jewel'});ma.send();}},_viewerIsAParticipant:function ga(ha,ia){if(!ia.getParticipantIDs())return false;if(ia.getParticipantIDs().indexOf(ha)>-1)return true;return ia.getParticipantIDs().indexOf(ha.toString())>-1;},_initJewelCount:function ga(ha,ia,ja){ha.setDuringInit(true);ha.reregisterListeners();fa._setJewelCount(ha,ia,ja);ha.setDuringInit(false);},_setJewelCount:function ga(ha,ia,ja){if(!ha.isOpen()){ha.setCount(ia);}else if(ia)ja();},_initJewelCounts:function ga(event){var ha=event.getData();fa.initJewels(null,null);if(ha.viewer_id)fa._viewerID=ha.viewer_id;if(ha.unread_notification_ids)fa._unseenNotificationIds=ha.unread_notification_ids||{};if(ha.request_count&&fa._requestsJewel)fa._initJewelCount(fa._requestsJewel,ha.request_count,fa._markRequestsRead);if(ha.message_count||ha.diode_badgeable_qp_count){var ia=(ha.message_count?ha.message_count:0)+(ha.diode_badgeable_qp_count?ha.diode_badgeable_qp_count:0);if(ha.diode_badgeable_qp_count)fa._diodeBadgeableQPCount=ha.diode_badgeable_qp_count;fa._initJewelCount(fa._messagesJewel,ia,fa._markMessagesRead);}if(ha.notification_count)fa._initJewelCount(fa._notificationsJewel,ha.notification_count,fa._markNotificationsSeen);},initJewels:function ga(ha,ia){if(fa._haveInitializedJewels)return;fa._haveInitializedJewels=true;u.initialize();fa.createJewels(ia||{});if(fa._requestsJewel){if(!fa._friendRequestAddListener)fa._friendRequestAddListener=t.listen('jewel_requests_add',null,fa.updateFriendRequests);if(!fa._friendRequestRemoveListener)fa._friendRequestRemoveListener=t.listen('jewel_requests_remove_old',null,fa.updateFriendRequests);if(!fa._friendAcceptedListener)fa._friendAcceptedListener=t.listen('jewel_friending_notifs',null,fa.updateFriendRequests);if(!fa._friendRequestSeenListener)fa._friendRequestSeenListener=t.listen('friend_requests_seen',null,fa.markFriendRequestsSeen);}if(!fa._notificationListener)fa._notificationListener=t.listen('m_notification',null,fa.updateNotification);if(!fa._notificationRefreshListener)fa._notificationRefreshListener=t.listen('m:jewel-set:notifications-jewel:refresh-flyout',null,fa.refreshNotificationsConstraints);if(!fa._messageListener)fa._messageListener=t.listen(h.MESSAGE,null,fa.updateMessage);if(!fa._messageCountListener)fa._messageCountListener=t.listen('inbox',null,fa.updateUnreadMessageCount);if(!fa._notifReadListener)fa._notifReadListener=t.listen('notifications_read',null,fa.updateUnseenNotificationIds);if(!fa._notifSeenListener)fa._notifSeenListener=t.listen('notifications_seen',null,fa.updateUnseenNotificationIds);if(!fa._friendRequestResponseListener)fa._friendRequestResponseListener=t.listen('m:requests:refresh',null,function(){var ja=fa._hasCombinedTab?'notifications_flyout':'reqs_flyout';q.getInstance(ja).refreshConstraints();});if(!fa._orientationChangeListener)fa._orientationChangeListener=t.listen('m:viewport:orientation-change',null,fa._onOrientationChange);},_onOrientationChange:function ga(){setTimeout(function(){var ha=q._activePopover;if(!ha)return;if(s.getHeight()+'px'!==ha.flyout.style.minHeight)ha.refreshConstraints();},800);}};(function(){t.listen('m:jewels:init-counts',null,fa._initJewelCounts);})();f.exports=fa;}),null);
__d('MPageHeaderAccessibility',['Stratcom','MAria','DOM'],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=document.body,l=j.scry(k,'*','mChromeHeaderCenter')[0],m=j.scry(k,'*','mChromeHeaderRight')[0],n=document.getElementById('root');function o(q){if(q)i.show(q);}function p(q){if(q)i.hide(q);}h.listen('m:side-area:show',null,function(q){p(l);p(m);p(n);});h.listen('m:side-area:hide',null,function(q){o(l);o(m);o(n);});f.exports={};}),null);
__d('MJewelNotifications',['Bootloader','ChannelEventType','MRequest','MURI','Run','Stratcom','SubscriptionsHandler','isFacebookURI'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p={overlayIcon:false};function q(r,s){this.$MJewelNotifications1=r;this.$MJewelNotifications2=[];this.$MJewelNotifications3=false;this.$MJewelNotifications4=false;this.$MJewelNotifications5=s||p;this.$MJewelNotifications6=new n();this.$MJewelNotifications6.addSubscriptions(l.onLeave(function(){this.$MJewelNotifications6.release();}.bind(this)),m.listen(i.NOTIFICATIONS_NEW,null,this.onNotificationReceive.bind(this)));}q.prototype.getNotifications=function(){return this.$MJewelNotifications2;};q.prototype.registerListeners=function(){this.$MJewelNotifications6.addSubscriptions(m.listen(i.NOTIFICATIONS_READ,null,this.onNotificationRead.bind(this)),m.listen('click','live-notifications',this.onNotificationClick.bind(this)),m.listen('m:jewel:flyout:open',null,this.onJewelOpen.bind(this)));};q.prototype.onJewelOpen=function(event){var r=event.getData(),s=r&&r.jewel&&r.jewel==='notifications';if(s&&this.$MJewelNotifications4)this.updateUI();};q.prototype.onNotificationClick=function(event){var r=event.getNode('live-notification');if(!r)return;var s=r.getAttribute('data-alertid');this.readNotification(s);this.updateUI();new j('/a/jewel_notifications_log.php').addData({click_type:'jewel_notif_click',id:s}).send();};q.prototype.onNotificationRead=function(event){var r=event.getData();if(r&&r.alert_ids){r.alert_ids.forEach(function(s){this.readNotification(s);}.bind(this));this.updateUI();}};q.prototype.readNotification=function(r){this.$MJewelNotifications2.forEach(function(s){if(s.alert_id==r){if(s.unread)this.$MJewelNotifications4=true;s.unread=false;}}.bind(this));};q.prototype.addNotification=function(r){this.$MJewelNotifications2=this.$MJewelNotifications2.filter(function(s){return s.alert_id!==r.alert_id;});r.timestamp=Date.now();this.$MJewelNotifications2.push(r);this.$MJewelNotifications4=true;};q.prototype.onNotificationReceive=function(event){var r=event.getData();if(r&&r.data){if(r.data.type==='friend_confirmed')return;if(!this.$MJewelNotifications3){this.$MJewelNotifications3=true;this.registerListeners();}this.addNotification(r.data);this.updateUI();}};q.prototype.updateUI=function(){if(!this.$MJewelNotifications3||!this.$MJewelNotifications4)return;h.loadModules(["React","ReactDOM","MJewelNotificationList.react","Popover"],function(r,s,t,u){if(!u.getInstance('notifications_flyout').isOpen())return;var v={notifications:this.$MJewelNotifications2,overlayIcon:this.$MJewelNotifications5.overlayIcon};s.render(r.createElement(t,v),this.$MJewelNotifications1);u.getInstance('notifications_flyout').refreshConstraints();this.$MJewelNotifications4=false;}.bind(this),'MJewelNotifications');};f.exports=q;}),null);
__d('MPlaces',['$','DOM','MLegacyDataStore','LoadingIndicator','MRequest','Stratcom','MPageController','MURI','URI','XPlacesUpdateLocationController','ViewerLocationSource','FWLoader'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=c('FWLoader').FW,t={LINK_SIGIL:'gps-link',FORM_SIGIL:'gps-form',UPDATE_LOCATION_INTERVAL:60000,desiredProperties:['latitude','longitude','accuracy','altitude','altitudeAccuracy','heading','speed'],locationOptions:{enableHighAccuracy:true,timeout:60000,maximumAge:300000},watchID:null,pendingHref:'',pendingForm:null,_JSONLocation:'',_currentSearchMode:null,_lastUpdateTime:0,enableFWGeolocation:true,locationSearchModes:{SEARCH_MODE:'m',MODE_COMPOSER:'cp',MODE_CHECKIN:'ci'},setCurrentJSONLocation:function u(v){t._JSONLocation=v;},getCurrentJSONLocation:function u(){return t._JSONLocation;},setLocationSearchMode:function u(v){t._currentSearchMode=v;},getLocationSearchMode:function u(){return t._currentSearchMode;},shouldUseFWGeolocation:function u(){return window.FW_ENABLED&&s.isIOS()&&t.enableFWGeolocation;},updateLocation:function u(v){if(v){if(t.shouldUseFWGeolocation())v={coords:v};var w={},x;for(var y=0;y<t.desiredProperties.length;y++){x=t.desiredProperties[y];if(v.coords[x])w[x]=v.coords[x];}if(v.timestamp)w.timestamp=v.timestamp/1000;t._JSONLocation=JSON.stringify(w);t.sendCurrentLocationToServer();if(t.pendingForm){t.submitForm(t.pendingForm);}else if(t.pendingHref)t.gotoPage(t.pendingHref);t.pendingForm=null;t.pendingHref='';m.invoke('location-update',null,{position:v});}},handleError:function u(v){t.clearWatch();m.invoke('location-error',null,{error:v});if(t.pendingForm){t.submitForm(t.pendingForm);t.pendingForm=null;}else if(t.pendingHref){t.gotoPage(t.pendingHref);t.pendingHref='';}},sendCurrentLocationToServer:function u(){var v=Date.now();if(v-t._lastUpdateTime>t.UPDATE_LOCATION_INTERVAL){t._lastUpdateTime=v;var w=q.getURIBuilder().setString('json_location',t._JSONLocation).setEnum('source',r.MSITE_PLACES).getURI();new l(w).setMethod('POST').send();}},gotoPage:function u(v){var w=new p(v);w.addQueryData('json_location',t._JSONLocation);n.load(w);},submitForm:function u(v){v.appendChild(i.create('input',{name:'json_location',type:'hidden',value:t._JSONLocation}));if(!v.onsubmit||v.onsubmit())v.submit();},clearWatch:function u(){if(!t.watchID)return;if(t.shouldUseFWGeolocation()){s.geolocation.clearWatch();}else navigator.geolocation.clearWatch(t.watchID);t.watchID=null;},watchPosition:function u(){if(t.shouldUseFWGeolocation()){t.watchID=1;s.geolocation.watchPosition(t.updateLocation,t.handleError);s.geolocation.getCurrentPosition(t.updateLocation);}else{var v=setTimeout(t.handleError,t.locationOptions.timeout);t.watchID=navigator.geolocation.watchPosition(function(w){clearTimeout(v);t.updateLocation(w);},function(w){clearTimeout(v);t.handleError(w);},t.locationOptions);}},monitorLocation:function u(){t.clearWatch();t.watchPosition();l.listen('postprocess',function(){if(!document.getElementById('place_update')&&t.watchID)t.clearWatch();});},submitFormWithLocation:function u(v){if(typeof v=='string')v=h(v);var w=t;k.show();if(w.watchID&&w._JSONLocation){w.submitForm(v);return;}w.pendingHref='';w.pendingForm=v;w.monitorLocation();return false;},gotoPageWithLocation:function u(v){var w=t;k.show();if(w.watchID&&w._JSONLocation){w.gotoPage(v);return;}w.pendingForm=null;w.pendingHref=v;w.monitorLocation();return false;},onClick:function u(event){event.kill();var v=j.get(event.getNode(t.LINK_SIGIL));t.gotoPageWithLocation(v.href);},onSubmit:function u(event){event.kill();var v=i.find(event.getNode(t.FORM_SIGIL),'form');t.submitFormWithLocation(v);}};f.exports=t;}),null);
__d('MSideNavMarauderLogger',['MLegacyDataStore','Stratcom','MarauderLogger','MTouchClick'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='';function m(event){j.toggleModule('sidebar_menu',true);}function n(event){j.toggleModule('sidebar_menu',false);}function o(event){var x=event.getNode('tag:a'),y=event.getNode('tag:div');j.log('open_application','sidebar_menu',{application_link_type:'local_module',display_name:y?y.innerText:'unknown',url:x&&x.href});j.setNavigationModule('sidebar_menu');}function p(){u('session_start');}function q(){u('cancel');}function r(x){var y=x.getData();if(y.node.rel<=0)return;var z=0,aa='',ba=h.get(y.node);if(ba){z=ba.bootstrap?1:0;aa=ba.type;}var ca=0,da=null;for(var ea=0;ea<y.results.length;ea++){var fa=y.results[ea];if(fa.rel>0){if(fa.rel==y.node.rel){da=ca;break;}ca++;}}u('click',{query:y.query,is_bootstrapped:z,display_position:da},aa,y.node.rel);}function s(x){var y=x.getData();u('click',{query:y.query,is_bootstrapped:y.node.bootstrap?1:0,display_position:y.position},y.node.type,y.node.id);}function t(x){if(l!==x)u('search_keystroke',{prev_query:l,new_query:x});l=x;}function u(x,y,z,aa){j.log(x,'search_typeahead',y,z,aa);}function v(x){return x.listen('change',t);}i.listen('m:side-area:show',null,m);i.listen('m:side-area:hide',null,n);i.listen('click','side-menu-item',o);var w=k.hasTouchEvents()?'touchend':'click';i.listen(w,'search-activator',p);i.listen(w,'graph-search-activator',p);i.listen('click','graph-search-entry-point',p);i.listen('m:search-overlay:cancel',null,q);i.listen('m:search-overlay:cancel-react',null,q);i.listen('m:search-typeahead:select',null,r);i.listen('m:search-typeahead:select-react',null,s);f.exports={setupTypeaheadListener:v};}),null);
__d('MNotificationClick',['CSS','MLegacyDataStore','Stratcom','MRequest'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='notification',m='list_',n='acw',o='aclb',p={},q=false;function r(){if(q)return;j.listen('click',l,s);j.listen('m:page:render:cache:complete',null,t);q=true;}function s(event){var w=event.getNode('touchable');if(!w)return;var x=i.get(w).notif_id;if(!x)return;new k('/a/jewel_notifications_log.php').addData({click_type:'notification_click',id:x}).send();u(event);}function t(w){if(w.getData().path.indexOf('notifications')>-1)for(var x in p)v(x);}function u(event){var w=event.getNode('marea');if(!w)return;var x=w.getAttribute('id');if(!x)return;v(x);var y=x.startsWith(m)?x.substring(m.length):m+x;v(y);p[x]=true;p[y]=true;}function v(w){var x=document.getElementById(w);if(x){h.addClass(x,n);h.removeClass(x,o);}}f.exports={init:r};}),null);
__d('MSearchConst',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={refid:46,news_search:'news',video_search:'video',content_search:'content',msite_news_null_state:'mnns',msite_news_non_gs_null_state:'mnngns',event_click:'click',event_impression:'imp'};}),null);
__d('MGraphSearchTypeaheadUtils',['MSearchConst','URI','cx','fbt'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='gsv2',m='group';f.exports={getContainerClasses:function n(o){return "_djv"+(!o.isActive?' '+"_bjm":'')+(o.isActive?' '+"_bjn":'')+(o.withQuery?' '+"_xg3":'')+(o.isWaiting?' '+"_bjo":'')+(o.isVisible?' '+"_bjp":'')+(!o.isVisible?' '+"_bjq":'')+(o.hasTopNavSearch?' '+"_5ek4":'')+(!o.hasTopNavSearch?' '+"_5ek5":'')+(' '+"_3gwg")+(o.vertical===h.content_search?' '+"_2c_g":'');},getPlaceholder:function n(o){if(o.searchMode===m){return k._("\u5728{groupName}\u4e2d\u641c\u5c0b",[k.param('groupName',o.groupName)]);}else if(o.typeaheadConfig.hasTopNavSearch){if(o.selectedIntent!=null){return o.typeaheadConfig.MGraphSearchIntentTypes.Placeholders[o.selectedIntent];}else return k._("\u641c\u5c0b");}else return '';},getInitialSearchMode:function n(){var o=new i(window.location),p=this.getSpecialSearchMode(o);if(p!=null)return p;var q=new i(o.getPath());return this.getGlobalSearchMode(q);},getSpecialSearchMode:function n(o){if(o.getQueryData().groupID)return m;return null;},getGlobalSearchMode:function n(o){return l;}};}),null);
__d('MSearchTypeaheadLogger',['setTimeoutAcrossTransitions','MLegacyDataStore','DOM','MTouchClick','MRequest','SubscriptionsHandler','Stratcom'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=1000;function p(r){var s=[];for(var t=0,u=r.length;t<u;t++){var v=r[t];if(v.getAttribute('rel')>0){var w={id:v.getAttribute('rel')};w.type=v.type;w.renderType=v.renderType;try{var y=j.find(v,'a','typeahead-result');if(i.get(y).bootstrap)w.bootstrap=1;}catch(x){}s.push(w);}}return s;}function q(r,s){'use strict';this.typeahead=r;this.uri=s;this.initialize();this.emptyQueryResults=[];this.addSubscriptions();}q.prototype.destroy=function(){'use strict';clearTimeout(this.blurTimeout);this.subscriptions.release();};q.prototype.addSubscriptions=function(){'use strict';var r=k.hasTouchEvents()?'touchend':'click';if(this.subscriptions)this.subscriptions.release();this.subscriptions=new m();this.subscriptions.addSubscriptions(this.typeahead.listen('focus',function(){this.startSession(this.typeahead.getValue(),{force:true});}.bind(this)),this.typeahead.listen('change',function(s){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!t.preventSessionStart)this.startSession(s);if(this.sessionInProgress())this.data.query=s;}.bind(this)),this.typeahead.listen('keypress',function(s){this.keypressed+=1;}.bind(this)),this.typeahead.listen('select',function(s){var t=s&&(s.rel||s.getAttribute('rel'));if(!this.data.query)this.data.null_state=1;this.data.click_event=Date.now();if(t){this.data.selected_id=t;}else this.data.selected_search=1;if(this.results&&this.results.length&&this.data.query&&this.data.query.length)n.invoke('m:search-typeahead:select',null,{node:s,results:this.results.slice(),query:this.data.query.slice()});this.logToServer();}.bind(this)),this.typeahead.listen('show',function(s){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!t.preventSessionStart)this.startSession(this.typeahead.getValue());if(this.sessionInProgress())if(s.show){this.results=p(s.show);if(!this.typeahead.getValue())this.emptyQueryResults=this.results;}else{this.data.candidate_results=s.slice().filter(function(u){return !u.isInvalidated;});if(!this.typeahead.getValue())this.emptyQueryResults=this.data.candidate_results;}}.bind(this)),this.typeahead.listen('query',function(s,t){this.data.selected_search=1;this.data.selected_type=t;this.logToServer();}.bind(this)),n.listen(r,'search-activator',function(){this.startSession('',{force:true});}.bind(this)),n.listen(r,'graph-search-activator',function(){this.startSession('',{force:true});}.bind(this)),this.typeahead.listen('scroll',function(event){this.data.scrolled=1;}.bind(this)));};q.prototype.updateTypeahead=function(r){'use strict';this.typeahead=r;this.addSubscriptions();};q.prototype.blur=function(r){'use strict';this.blurInProgress=true;this.blurTimeout=h(function(){this.data.session_end_reason=r;if(!this.data.query)this.data.null_state=1;this.logToServer();}.bind(this),o);};q.prototype.startSession=function(r,s){'use strict';s=s||{};if(this.sessionID==null&&(r||s.force)){this.data={};this.keypressed=0;this.sessionID=Math.random().toString();this.data.query=r;this.data.session_start=Date.now();n.invoke('m-typeahead-logger:new-session-id',null,{sessionID:this.sessionID,query:r});}};q.prototype.sessionInProgress=function(){'use strict';if(this.sessionID!==null&&!this.blurInProgress)return true;return false;};q.prototype.logToServer=function(){'use strict';clearTimeout(this.blurTimeout);if(this.sessionID!=null){this.data.sid=this.sessionID;this.data.count_keys_pressed=this.keypressed;this.data.typeahead_type=this.typeahead.getTypeaheadType&&this.typeahead.getTypeaheadType();this.data.candidate_results=this.data.candidate_results||[];if(this.data.candidate_results.length===0)this.data.candidate_results=this.results;this.data.null_state_candidate_results=this.emptyQueryResults;var r=new l(this.uri);r.setMethod('POST').setData({stats:JSON.stringify(this.data)}).send();}this.initialize();};q.prototype.initialize=function(){'use strict';this.data={};this.sessionID=null;this.keypressed=0;this.results=[];this.blurInProgress=false;};f.exports=q;}),null);
__d("XGraphSearchFlyoutBodyController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/graph_search\/flyout\/body\/",{});}),null);
__d('MGraphSearchTypeaheadShim',['$','DOM','EventEmitter','EventListener','MGraphSearchTypeaheadUtils','MHistory','MJewels','MRequest','MSearchTypeaheadLogger','Stratcom','SubscriptionsHandler','XGraphSearchFlyoutBodyController','throttle'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u,v;if(c.__markCompiled)c.__markCompiled();var w='group',x='/search/metrics.php';u=babelHelpers.inherits(y,j);v=u&&u.prototype;function y(){'use strict';v.constructor.call(this);this.onClearClick=function(){this.$MGraphSearchTypeaheadShim7.typeaheadShim.input.value='';this.emit('change','');}.bind(this);this.onNewSessionId=function(z){var aa=this.$MGraphSearchTypeaheadShim7.typeaheadShim.form,ba=i.scry(aa,'input','search-typeahead-session-id')[0];if(!ba){ba=document.createElement('input');ba.type='hidden';ba.name='tsid';aa.appendChild(ba);q.addSigil(ba,'search-typeahead-session-id');}var ca=z.getData().sessionID;ba.value=ca;this.$MGraphSearchTypeaheadShim11=ca;}.bind(this);this.onQueryChange=t(this.onQueryChange,200,this);}y.prototype.init=function(z,aa){'use strict';if(this.$MGraphSearchTypeaheadShim1)return;this.$MGraphSearchTypeaheadShim7=z;this.$MGraphSearchTypeaheadShim8=aa;this.$MGraphSearchTypeaheadShim1=true;this.listen=this.addListener;this.$MGraphSearchTypeaheadShim10=new p(this,x);var ba=z.typeaheadShim.input,ca=z.typeaheadShim.clear,da=z.typeaheadShim.form;this.$MGraphSearchTypeaheadShim4=new r();this.$MGraphSearchTypeaheadShim4.addSubscriptions(q.listen('m-typeahead-logger:new-session-id',null,this.onNewSessionId),k.listen(ba,'focus',function(){this.emit('focus');this.emit('change',ba.value);}.bind(this)),k.listen(ba,'keydown',function(ea){this.emit('keypress',ba.value);this.onQueryChange(ba.value,{preventSessionStart:ea.keyCode===13});}.bind(this)),k.listen(ca,'click',this.onClearClick),k.listen(ca,'touchstart',this.onClearClick),q.listen('m:graph-search:ready',null,function(){this.$MGraphSearchTypeaheadShim4.release();}.bind(this)),k.listen(da,'submit',function(){if(ba.value)this.emit('query');this.$MGraphSearchTypeaheadShim9=true;if(this.$MGraphSearchTypeaheadShim3!=null)this.$MGraphSearchTypeaheadShim3.abort();}.bind(this)),q.listen('click','m-groups-scoped-search-button',function(ea){var fa=ea.getTarget(),ga=fa.getAttribute('data-ft'),ha=fa.getAttribute('data-name');if(!ga||!ha)return;this.$MGraphSearchTypeaheadShim5={searchMode:w,groupID:ga,groupName:ha,refURI:window.location.href,typeaheadConfig:z.typeaheadConfig,isSubmittingForm:false};m.pushSoftState(n.SEARCH);}.bind(this)),q.listen(['m:chrome:tab:show','m:chrome:tab:hide'],n.SEARCH,function(event){var ea=event.getType()==='m:chrome:tab:show';ea?this.onChromeTabShow():this.onChromeTabHide();}.bind(this)),q.listen(['m:onload'],null,function(){if(z.preload)this.bootload(z,aa);}.bind(this)));if(m.getParam(m.SOFT_STATE_KEY)===n.SEARCH)this.onChromeTabShow();};y.prototype.getValue=function(){'use strict';return this.$MGraphSearchTypeaheadShim7.typeaheadShim.input.value;};y.prototype.getTypeaheadType=function(){'use strict';var z='m_top_nav_gsv2';if(this.$MGraphSearchTypeaheadShim7.typeaheadConfig.hasTopNavSearch)z+='_small_box';return z;};y.prototype.onQueryChange=function(z,aa){'use strict';this.emit('change',z,aa);};y.prototype.onChromeTabShow=function(){'use strict';this.$MGraphSearchTypeaheadShim7.typeaheadShim.container.className=l.getContainerClasses({hasTopNavSearch:this.$MGraphSearchTypeaheadShim7.typeaheadConfig.hasTopNavSearch,isActive:true,isVisible:true});this.$MGraphSearchTypeaheadShim7.typeaheadShim.input.placeholder=l.getPlaceholder(this.$MGraphSearchTypeaheadShim5||this.$MGraphSearchTypeaheadShim7);var z=Object.assign({},this.$MGraphSearchTypeaheadShim7,this.$MGraphSearchTypeaheadShim5);this.$MGraphSearchTypeaheadShim7.typeaheadShim.input.focus();this.bootload(z,this.$MGraphSearchTypeaheadShim8);this.$MGraphSearchTypeaheadShim5=null;};y.prototype.onChromeTabHide=function(){'use strict';this.$MGraphSearchTypeaheadShim7.typeaheadShim.container.className=l.getContainerClasses({hasTopNavSearch:this.$MGraphSearchTypeaheadShim7.typeaheadConfig.hasTopNavSearch,isActive:false,isVisible:false});this.$MGraphSearchTypeaheadShim5=null;this.$MGraphSearchTypeaheadShim10.blur('navigated_away');};y.prototype.bootload=function(z,aa){'use strict';if(!this.$MGraphSearchTypeaheadShim9)this.$MGraphSearchTypeaheadShim2=function(ba,ca,da){ca.render(ba.createElement(da,babelHelpers['extends']({typeaheadLogger:this.$MGraphSearchTypeaheadShim10,sessionID:this.$MGraphSearchTypeaheadShim11},z)),h(aa));}.bind(this);if(!this.$MGraphSearchTypeaheadShim6){this.$MGraphSearchTypeaheadShim3=new o(s.getURIBuilder().getURI());this.$MGraphSearchTypeaheadShim3.listen('error',function(){this.$MGraphSearchTypeaheadShim2=null;}.bind(this));this.$MGraphSearchTypeaheadShim3.send();this.$MGraphSearchTypeaheadShim6=true;}};y.prototype.render=function(z,aa,ba){'use strict';var ca=this.$MGraphSearchTypeaheadShim2;if(ca!=null)ca(z,aa,ba);};f.exports=new y();}),null);
__d("XMobileSearchTrendingLoggingController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/graphsearch\/trending\/logging\/",{topic_ids:{type:"IntVector",required:true},source:{type:"String",required:true},positions:{type:"IntVector",required:true},query_id:{type:"Int",required:true},event:{type:"String",required:true}});}),null);
__d('MSearchTrendingLogger',['XMobileSearchTrendingLoggingController','MRequest','MSearchConst','Run','Stratcom','forEachObject'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=null,o={registerTrendingTopicListeners:function p(q,r,s,t){var u,v=this;if(!n){n={};k.onLeave(function(){m(n,function(z){return z.remove();});n=null;});}var w=[],x=function z(aa){var ba=q[aa];if(ba==null||n[ba])return 'continue';n[ba]=l.listen('click',ba,function(){this._logTrendingTopicClick(ba,r,s[aa],t);}.bind(v));w.push(n[ba]);};for(var y=0;y<q.length;y++){var u=x(y);if(u==='continue')continue;}return w;},logTrendingTopicImpressions:function p(q,r,s,t){if(!q||q.length===0)return;for(var u=0;u<q.length;u++)if(q[u]==null){q.splice(u,1);s.splice(u,1);u--;}var v=h.getURIBuilder().setIntVector('topic_ids',q).setString('source',r).setIntVector('positions',s).setInt('query_id',t).setString('event',j.event_impression).getURI(),w=new i(v);w.send();},_logTrendingTopicClick:function p(q,r,s,t){if(!q)return;return function(){var u=h.getURIBuilder().setIntVector('topic_ids',[q]).setString('source',r).setIntVector('positions',[s]).setInt('query_id',t).setString('event',j.event_click).getURI(),v=new i(u);v.send();};}};f.exports=o;}),null);
__d('MSearchTypeaheadPerfLogger',['BanzaiScuba','CurrentUser','SubscriptionsHandler','performanceNow'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n,o){'use strict';this._searchType=n.type;this._sampleRate=n.sample_rate;this._siteType=n.site;this._cacheEnable=o?1:0;this.init(m);this.initEvents();this._reset();}l.prototype.init=function(m){'use strict';this._data=m.getDatasource();this._typeahead=m;if(this._typeahead.props&&this._typeahead.props.vertical)this._vertical=this._typeahead.props.vertical;};l.prototype.initEvents=function(){'use strict';this._subscriptions=new j();this._subscriptions.addSubscriptions(this._data.listen('initial_render',this.initialRender.bind(this)),this._data.listen('after_complete',this.complete.bind(this)),this._data.listen('req_dispatch',this.remoteRequestDispatch.bind(this)),this._data.listen('req_sent',this.remoteRequestSent.bind(this)),this._data.listen('req_recv',this.remoteRequestReceived.bind(this)),this._typeahead.listen('update',this.queryStart.bind(this)),this._typeahead.listen('render_start',this.renderStart.bind(this)),this._typeahead.listen('rendered',this.rendered.bind(this)));};l.prototype.destroy=function(){'use strict';this._subscriptions.release();};l.prototype._reset=function(){'use strict';this._startTime=null;this._intialRenderTime=null;this._remoteRequestDispatchTime=null;this._remoteRequestSentTime=null;this._remoteRequestReceivedTime=null;this._renderStart=null;this._rendered=null;this._endTime=null;this._cacheOnly=1;this._resultLength=0;this._originQuery=null;this._query=null;};l.prototype.initialRender=function(){'use strict';this._intialRenderTime=Date.now();};l.prototype.complete=function(){'use strict';this._endTime=Date.now();this._query=this._typeahead.getValue();this.logToScuba();this._reset();};l.prototype.queryStart=function(m){'use strict';this._reset();this._originQuery=m;this._startTime=Date.now();};l.prototype.renderStart=function(){'use strict';this._renderStart=k();};l.prototype.rendered=function(){'use strict';this._rendered=k()-this._renderStart;};l.prototype.remoteRequestDispatch=function(m){'use strict';this._remoteRequestDispatchTime=Date.now();this._sid=m;};l.prototype.remoteRequestSent=function(){'use strict';this._remoteRequestSentTime=Date.now();};l.prototype.remoteRequestReceived=function(m){'use strict';this._remoteRequestReceivedTime=Date.now();this._resultLength=m;this._cacheOnly=0;};l.prototype.logToScuba=function(){'use strict';if(this._startTime===null)return;if(this._originQuery!==this._query)return;var m=new h('mobile_search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{mtouchGKs:true}});m.addInteger('sample_rate',this._sampleRate);m.addNormal('typeahead_type',this._searchType);m.addNormal('site',this._siteType);if(this._vertical){m.addNormal('vertical',this._vertical);m.addNormal('search_mode',this._typeahead.state.searchMode);}m.addNormal('session_id',this._sid);m.addNormal('user_id',i.getID());m.addNormal('query',this._query);m.addInteger('cache_keypress_render',Math.max(this._intialRenderTime-this._startTime,0));if(this._rendered)m.addInteger('rendered',this._rendered);if(this._cacheOnly===0){m.addInteger('remote_keypress_query_dispatch',Math.max(this._remoteRequestDispatchTime-this._startTime,0));m.addInteger('remote_keypress_query_start',Math.max(this._remoteRequestSentTime-this._startTime,0));m.addInteger('remote_keypress_query_end',Math.max(this._remoteRequestReceivedTime-this._startTime,0));m.addInteger('remote_keypress_render',Math.max(this._endTime-this._startTime,0));m.addInteger('remote_render',Math.max(this._endTime-this._remoteRequestReceivedTime,0));m.addInteger('time_js_async',Math.max(this._remoteRequestReceivedTime-this._remoteRequestSentTime,0));}m.addInteger('end_to_end',Math.max(this._endTime-this._startTime,0));m.addInteger('num_result',this._resultLength);m.addNormal('is_cache_only',this._cacheOnly);m.addNormal('is_cache_enable',this._cacheEnable);m.post();};f.exports=l;}),null);
__d('MSearchTypeaheadPerfLoggerV2',['Banzai','Stratcom','SubscriptionsHandler','URI'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n,o,p){'use strict';this.$MSearchTypeaheadPerfLoggerV211=3;this.$MSearchTypeaheadPerfLoggerV212=3;this.$MSearchTypeaheadPerfLoggerV22=n;this.$MSearchTypeaheadPerfLoggerV21=m;this.$MSearchTypeaheadPerfLoggerV24='mtouch_typeahead_log_perf';this.$MSearchTypeaheadPerfLoggerV25='mtouch_serp_log_perf';this.$MSearchTypeaheadPerfLoggerV28=p;this.$MSearchTypeaheadPerfLoggerV29='';this.$MSearchTypeaheadPerfLoggerV23={query:null,latencyData:[],typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,sessionID:null,sessionStartTime:null,click:false,isBootstrapClick:false,isExactMatchKeywordClick:false,isNullStateClick:false,isSeeMoreClick:false};this.$MSearchTypeaheadPerfLoggerV214();this.$MSearchTypeaheadPerfLoggerV215();}l.prototype.$MSearchTypeaheadPerfLoggerV214=function(){'use strict';this.$MSearchTypeaheadPerfLoggerV213=new j();this.$MSearchTypeaheadPerfLoggerV213.addSubscriptions(i.listen('m-typeahead-logger:new-session-id',null,function(m){this.$MSearchTypeaheadPerfLoggerV216(m.getData().sessionID,m.getData().query);}.bind(this)),i.listen('log-m-search-session-end',null,function(m){this.$MSearchTypeaheadPerfLoggerV217();this.$MSearchTypeaheadPerfLoggerV215();}.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('update',this.onQueryUpdated.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('show',this.onResultsRendered.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('select',this.onResultLinkReady.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('on-enter-pressed',this.onEnterPressed.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('result-selected',this.onResultSelected.bind(this)),i.listen('m:page:render:complete',null,function(m){var n=new k(this.$MSearchTypeaheadPerfLoggerV29),o=new k(m.getData().path),p=Date.now()-this.$MSearchTypeaheadPerfLoggerV210;if(n.getPath()===o.getPath()&&p>=0){var q={tti:p,typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,uriPath:n.getPath()};h.post(this.$MSearchTypeaheadPerfLoggerV25,q,{delay:this.$MSearchTypeaheadPerfLoggerV211,retry:true});}this.$MSearchTypeaheadPerfLoggerV29='';}.bind(this)));};l.prototype.destroy=function(){'use strict';this.$MSearchTypeaheadPerfLoggerV213.release();};l.prototype.onEnterPressed=function(m){'use strict';this.$MSearchTypeaheadPerfLoggerV29=m;this.$MSearchTypeaheadPerfLoggerV210=Date.now();};l.prototype.onResultLinkReady=function(m){'use strict';this.$MSearchTypeaheadPerfLoggerV29=m.href;this.$MSearchTypeaheadPerfLoggerV210=Date.now();};l.prototype.onResultsRendered=function(m,n){'use strict';var o=this.$MSearchTypeaheadPerfLoggerV218(),p=this.$MSearchTypeaheadPerfLoggerV219(o);if(p==null)return;if(!this.$MSearchTypeaheadPerfLoggerV220())return;var q=Array.isArray(m)?this.$MSearchTypeaheadPerfLoggerV221(m):this.$MSearchTypeaheadPerfLoggerV221(m.show);if(this.$MSearchTypeaheadPerfLoggerV222(q))return;var r=m.show?q.map(function(v){return {isNullStateSuggestion:o==='',isFromCache:v.isFromCache,isSeeMore:v.isSeeMore};}):q,s=r.every(function(v){return (v.isNullStateSuggestion||v.isSeeMore||v.exactMatchKeyword);})&&r.some(function(v){return v.isNullStateSuggestion;}),t=r.every(function(v){return v.exactMatchKeyword||v.isSeeMore;}),u=r.every(function(v){return (v.isFromCache||v.isSeeMore||v.exactMatchKeyword);})&&r.some(function(v){return v.isFromCache;})&&!t;this.$MSearchTypeaheadPerfLoggerV23.latencyData.push({query:o,allFromNullState:s,allFromCache:u,allFromEcho:t||q.length===0,latency:Date.now()-p});this.$MSearchTypeaheadPerfLoggerV27=q;};l.prototype.onQueryUpdated=function(m){'use strict';if(this.$MSearchTypeaheadPerfLoggerV220()){this.$MSearchTypeaheadPerfLoggerV23.query=m;this.$MSearchTypeaheadPerfLoggerV26[m]=Date.now();}};l.prototype.onResultSelected=function(m){'use strict';if(m.id){if(m.bootstrapped){this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=true;}else if(m.exactMatchKeyword){this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick=true;}else if(m.isSeeMore){this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=true;}else if(m.isNullStateSuggestion)this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=true;}else if(m.rel>0){var n=this.$MSearchTypeaheadPerfLoggerV28.get(m);if(n)this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=n.bootstrap==1;this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=this.$MSearchTypeaheadPerfLoggerV218()==='';}else this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=true;this.$MSearchTypeaheadPerfLoggerV23.click=true;};l.prototype.$MSearchTypeaheadPerfLoggerV215=function(){'use strict';this.$MSearchTypeaheadPerfLoggerV26={};this.$MSearchTypeaheadPerfLoggerV27=[];this.$MSearchTypeaheadPerfLoggerV23.query=null;this.$MSearchTypeaheadPerfLoggerV23.latencyData=[];this.$MSearchTypeaheadPerfLoggerV23.sessionID=null;this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime=null;this.$MSearchTypeaheadPerfLoggerV23.click=false;this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=false;this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick=false;this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=false;this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=false;};l.prototype.$MSearchTypeaheadPerfLoggerV218=function(){'use strict';return this.$MSearchTypeaheadPerfLoggerV21.getValue()||'';};l.prototype.$MSearchTypeaheadPerfLoggerV220=function(){'use strict';return this.$MSearchTypeaheadPerfLoggerV23.sessionID!=null;};l.prototype.$MSearchTypeaheadPerfLoggerV216=function(m,n){'use strict';this.$MSearchTypeaheadPerfLoggerV215();this.$MSearchTypeaheadPerfLoggerV23.sessionID=m;this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime=Date.now();this.$MSearchTypeaheadPerfLoggerV23.query=n;this.$MSearchTypeaheadPerfLoggerV23.typeaheadType=this.$MSearchTypeaheadPerfLoggerV22;};l.prototype.$MSearchTypeaheadPerfLoggerV219=function(m){'use strict';if(this.$MSearchTypeaheadPerfLoggerV26[m]!=null){return this.$MSearchTypeaheadPerfLoggerV26[m];}else return this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime;};l.prototype.$MSearchTypeaheadPerfLoggerV222=function(m){'use strict';var n=this.$MSearchTypeaheadPerfLoggerV27.filter(function(p){return p.id!='seeMore';}).map(function(p){return p.display;}),o=m.filter(function(p){return p.id!='seeMore';}).map(function(p){return p.display;});return n.length==o.length&&n.every(function(p,q){return p==o[q];});};l.prototype.$MSearchTypeaheadPerfLoggerV221=function(m){'use strict';var n=this.$MSearchTypeaheadPerfLoggerV21;return m.filter(function(o){return !o.isInvalidated&&o!==n.loadingIndicator;});};l.prototype.$MSearchTypeaheadPerfLoggerV217=function(){'use strict';var m={query:this.$MSearchTypeaheadPerfLoggerV23.query,latencyData:this.$MSearchTypeaheadPerfLoggerV23.latencyData,typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,sessionID:this.$MSearchTypeaheadPerfLoggerV23.sessionID,sessionStartTime:this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime,click:this.$MSearchTypeaheadPerfLoggerV23.click,isBootstrapClick:this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick,isExactMatchKeywordClick:this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick,isNullStateClick:this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick,isSeeMoreClick:this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick};h.post(this.$MSearchTypeaheadPerfLoggerV24,m,{delay:this.$MSearchTypeaheadPerfLoggerV212,retry:true});i.invoke('typeahead-perf-logger-did-log',null,m);};f.exports=l;}),null);
__d('MSearchTypeaheadPerfLoggerUtil',['MLegacyDataStore','MSearchTypeaheadPerfLogger','MSearchTypeaheadPerfLoggerV2','SearchMTouchGlobalOptions'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={getNewMSearchTypeaheadPerfLogger:function m(n,o,p){if(k.useNewTypeaheadPerfLogger){return new j(n,o.type,p,h);}else return new i(n,o,p);}};f.exports=l;}),null);
__d('MPopover',['Popover','Stratcom','MRequest','MURI'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){var n=new h(m),o=[n.listen('open',function(){i.invoke(':m:page-header-right:open');if(m.sessionTime){var p=new k('/a/friendlists/log/').setQueryData({subject_id:m.subjectID,ref_param:m.refParam,session_time:m.sessionTime});new j(p.toString()).send();}}),n.listen('close',function(){i.invoke(':m:page-header-right:close');}),i.listen('click','flyout',function(){n.close();}),i.listen('m:page:unload',null,function(){while(o.length)o.pop().remove();o=null;n=null;})];}g.main=l;}),null);
__d("XLiveController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/sports\/{?query}\/",{date:{type:"Int"},ref:{type:"String"},source:{type:"String"},region_id:{type:"Int"},year:{type:"Int"},fref:{type:"String"},query:{type:"String"},name:{type:"String"},cursor:{type:"String"}});}),null);
__d('MTypeaheadNullstateSource',['URI','Stratcom','MTypeaheadTouchSource','XLiveController'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m;if(c.__markCompiled)c.__markCompiled();var n='graph-search-entry-point',o='search-recent-queries';l=babelHelpers.inherits(p,j);m=l&&l.prototype;function p(q,r){'use strict';m.constructor.call(this,q,r);i.listen('setCurrentProfileID',n,function(event){if(event.getData().profileID!==this.profileID){this.profileID=event.getData().profileID;this.refresh();}}.bind(this));i.listen('addRecentSearch',o,function(event){var s=event.getData().result;if(s)this.addRecentResult(s);}.bind(this));i.listen('addRecentQuery',o,function(event){var s=event.getData().query;if(s){var t=this.makeRecentResultWithQuery(s);this.addRecentResult(t);}}.bind(this));i.listen('refreshRecent',o,function(){this.refresh();}.bind(this));i.listen('searchRefreshNullstate',null,function(){return this.refresh();}.bind(this));}p.prototype.makeRecentResultWithQuery=function(q){'use strict';return {display:q,name:q,id:q,uri:'/search/top/?q='+q};};p.prototype.addRecentResult=function(q){'use strict';if(q.isTrending)return;q.isRecentSearch=true;var r={},s=0;q.idx=s;r[q.id]=q;for(var t in this._raw)if(t!=q.id){s++;this._raw[t].idx=s;r[t]=this._raw[t];}this._raw=r;};p.prototype.refresh=function(){'use strict';this._raw={};this.sendRequest();};p.prototype.getAuxiliaryData=function(){'use strict';return {profile_id:this.profileID?this.profileID:this.groupID?this.groupID:null,disable_single_state:this.singleStateDisabled===true,enable_scoped:this.scopedEnabled===true};};p.prototype.ondata=function(q){'use strict';m.ondata.call(this,q.nullstate);};p.prototype.matchResults=function(q){'use strict';var r=[];if(q==='')r=Object.keys(this._raw);this.sortHits(q,r);var s=this.renderNodes(q,r);this.invoke('resultsready',s);this.invoke('complete');};p.prototype.setCurrentProfileID=function(q){'use strict';this.profileID=q;};p.prototype.setForceDisableSingleState=function(q){'use strict';this.singleStateDisabled=q;};p.prototype.setEnableScoped=function(q){'use strict';this.scopedEnabled=q;};p.prototype.sortHits=function(q,r){'use strict';r.sort(this.sortingFunction.bind(this));};p.prototype.sortingFunction=function(q,r){'use strict';var s=this._raw[q],t=isNaN(s.idx)?Number.MAX_VALUE:s.idx,u=this._raw[r],v=isNaN(u.idx)?Number.MAX_VALUE:u.idx;return t-v;};p.prototype.getTransformer=function(){'use strict';return function(q){if(q.keyword_type==='trending'){var r=new h('/topic/'+q.id);if(q.isSport)r=k.getURIBuilder().setString('query',String(q.id)).setString('ref','m_search_null_state').getURI();return {id:q.name,display:q.name,name:q.name,uri:r.toString(),topicID:q.id,trendingQueryID:q.trendingQueryID,subtext:q.articleTitle,type:'trending',photo:q.articleImageURI,actionTime:0,isTrending:true,isNullStateSuggestion:true};}if(q.type==='keyword'||q.type==='grammar'){r=new h(q.path||q.uri);return {cost:q.cost,idx:q.idx,display:q.text,name:q.text,type:'keyword',id:q.uid,uri:r.toString(),actionTime:q.action_time,isPYMK:q.pymk,isRecentSearch:q.recent_search,subtext:q.subtext,logInfo:q.logInfo,isNullStateSuggestion:true,isScoped:q.is_scoped};}return {actionTime:q.action_time,name:q.text,uri:q.path||q.uri,id:q.uid||q.id,display:q.name||q.text,photo:q.photo,category:q.category,cost:q.cost,idx:q.idx,tokens:q.tokens,type:q.type[0].toUpperCase()+q.type.slice(1),verticalType:q.vertical_type,is_verified:q.is_verified,subtext:q.subtext,isPYMK:q.pymk,isRecentSearch:q.recent_search,logInfo:q.logInfo,isNullStateSuggestion:true,isScoped:q.is_scoped};};};f.exports=p;}),null);